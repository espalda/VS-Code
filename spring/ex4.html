spring 에서 메일 보내기


1. pom.xml 에 아래 코드 의존성 추가

텍스트 추가
<!-- 메일을 보내기 위한 의존성 추가 -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context-support</artifactId>
    <version>${org.springframework-version}</version>
</dependency>
<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4.3</version>
</dependency>


2. root-context.xml 에 아래 코드 추가
<!-- 메일을 보내기 -->
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host" value="smtp.gmail.com" />
    <property name="port" value="587" />
    <property name="username" value="아이디@gmail.com" />
    <property name="password" value="비밀번호" />
    <property name="javaMailProperties">
        <props>
            <prop key="mail.transport.protocol">smtp</prop>
            <prop key="mail.smtp.auth">true</prop>
            <prop key="mail.smtp.starttls.enable">true</prop>
            <prop key="mail.debug">true</prop>
        </props>
    </property>
</bean>


3. memberServiceImp에 anotation 추가 및 예외 처리 추가
@Autowired
private JavaMailSender mailSender;

try {
    MimeMessage message = mailSender.createMimeMessage();
    MimeMessageHelper messageHelper 
        = new MimeMessageHelper(message, true, "UTF-8");
    String setfrom = "aaa";  //빈문자열, 생략 불가
    messageHelper.setFrom(setfrom);  // 보내는사람 생략하거나 하면 정상작동을 안함
    messageHelper.setTo(email);     // 받는사람 이메일
    messageHelper.setSubject(title); // 메일제목은 생략이 가능하다
    messageHelper.setText(contents);  // 메일 내용

    mailSender.send(message);
}catch(Exception e){
    System.out.println(e);
}